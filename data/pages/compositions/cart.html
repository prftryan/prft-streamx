{{#define name="metaTitle"}}
<title>Cart</title>

{{#define name="content.html"}}

<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-8">Shopping Cart</h1>
    <div class="shopping-cart-content grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2">
            <div class="cart-items-container bg-white rounded-lg shadow-sm divide-y">
            </div>
        </div>
        <div class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
                <div class="space-y-4">
                    <div class="flex justify-between">
                        <span>Subtotal</span>
                        <span class="font-semibold">
                            <span>$</span>
                            <span class="subtotal"></span>
                        </span>
                    </div>
                    <div class="flex justify-between">
                        <span>Tax</span>
                        <span class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between"><span>Shipping</span><span class="font-semibold"></span></div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between">
                            <span class="font-semibold">Total</span>
                            <span class="font-semibold">
                                <span>$</span>
                                <span class="total"></span>
                            </span>
                        </div>
                    </div>
                    <button
                        class="checkout-button inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 px-4 py-2 w-full bg-dsg-red hover:bg-dsg-red/90 text-white">Proceed
                        to Checkout</a>
                </div>
            </div>
        </div>
    </div>
    <div class="shipping-information-content grid grid-cols-1 lg:grid-cols-3 gap-8 form-section">
        <div class="lg:col-span-2">
            <div class="container mx-auto px-4 py-8">
                <div class="max-w-3xl mx-auto">
                    <div class="flex justify-between mb-8">
                        <div class="flex-1 text-center text-dsg-red">
                            <div class="border-b-2 pb-2 border-dsg-red">Shipping Information</div>
                        </div>
                        <div class="flex-1 text-center text-gray-500">
                            <div class="border-b-2 pb-2 border-gray-200">Payment Method</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <form class="checkout-form">
                            <div class="block space-y-4 step-1">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="firstName">First Name</label><input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="firstName" required="" value="" />
                                    </div>
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="lastName">Last Name</label><input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="lastName" required="" value="" />
                                    </div>
                                </div>
                                <div>
                                    <label
                                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                        for="address">Street Address</label><input
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                        id="address" required="" value="" />
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="city">City</label><input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="city" required="" value="" />
                                    </div>
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="state">State</label><input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="state" required="" value="" />
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="zipCode">ZIP Code</label><input
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="zipCode" required="" value="" />
                                    </div>
                                    <div>
                                        <label
                                            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                                            for="phone">Phone Number</label><input type="tel"
                                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"
                                            id="phone" required="" value="" />
                                    </div>
                                </div>
                            </div>
                            <div class="block mt-8 border-t pt-6 step-1">
                                <div class="flex justify-between mb-4">
                                    <span class="font-semibold">Total</span><span class="font-semibold">$ {{ subtotal
                                        }}</span>
                                </div>
                                <button
                                    class="continue-payment inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 px-4 py-2 w-full bg-dsg-red hover:bg-dsg-red/90 text-white"
                                    type="button">
                                    Continue to Payment
                                </button>
                            </div>
                            <div class="hidden space-y-6 step-2">
                                <div role="radiogroup" aria-required="false" dir="ltr"
                                    class="grid grid-cols-2 gap-4 payment-group" tabindex="0" style="outline: none">
                                    <div class="border rounded-lg p-4 cursor-pointer border-dsg-red">
                                        <button type="button" role="radio" aria-checked="true" data-state="checked"
                                            value="credit-card"
                                            class="aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sr-only"
                                            id="credit-card" name="payment" tabindex="-1" data-radix-collection-item="">
                                            <span data-state="checked" class="flex items-center justify-center"><svg
                                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="lucide lucide-circle h-2.5 w-2.5 fill-current text-current">
                                                    <circle cx="12" cy="12" r="10"></circle>
                                                </svg></span></button><input type="radio" aria-hidden="true"
                                            tabindex="-1" value="credit-card" checked="" style="
                        transform: translateX(-100%);
                        position: absolute;
                        pointer-events: none;
                        opacity: 0;
                        margin: 0px;
                        width: 16px;
                        height: 16px;
                      " /><label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2 cursor-pointer"
                                            for="credit-card"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-credit-card h-5 w-5">
                                                <rect width="20" height="14" x="2" y="5" rx="2"></rect>
                                                <line x1="2" x2="22" y1="10" y2="10"></line>
                                            </svg>Credit Card</label>
                                    </div>
                                    <div class="border rounded-lg p-4 cursor-pointer border-gray-200">
                                        <button type="button" role="radio" aria-checked="false" data-state="unchecked"
                                            value="paypal"
                                            class="aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sr-only"
                                            id="paypal" tabindex="-1" data-radix-collection-item=""></button><input
                                            type="radio" aria-hidden="true" tabindex="-1" name="payment" value="paypal"
                                            style="
                        transform: translateX(-100%);
                        position: absolute;
                        pointer-events: none;
                        opacity: 0;
                        margin: 0px;
                        width: 16px;
                        height: 16px;
                      " /><label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2 cursor-pointer"
                                            for="paypal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-wallet h-5 w-5">
                                                <path
                                                    d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1">
                                                </path>
                                                <path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"></path>
                                            </svg>PayPal</label>
                                    </div>
                                    <div class="border rounded-lg p-4 cursor-pointer border-gray-200">
                                        <button type="button" role="radio" aria-checked="false" data-state="unchecked"
                                            value="stripe"
                                            class="aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sr-only"
                                            id="stripe" tabindex="-1" data-radix-collection-item=""></button><input
                                            type="radio" aria-hidden="true" name="payment" tabindex="-1" value="stripe"
                                            style="
                        transform: translateX(-100%);
                        position: absolute;
                        pointer-events: none;
                        opacity: 0;
                        margin: 0px;
                        width: 16px;
                        height: 16px;
                      " /><label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2 cursor-pointer"
                                            for="stripe"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-banknote h-5 w-5">
                                                <rect width="20" height="12" x="2" y="6" rx="2"></rect>
                                                <circle cx="12" cy="12" r="2"></circle>
                                                <path d="M6 12h.01M18 12h.01"></path>
                                            </svg>Stripe</label>
                                    </div>
                                    <div class="border rounded-lg p-4 cursor-pointer border-gray-200">
                                        <button type="button" role="radio" aria-checked="false" data-state="unchecked"
                                            value="shopnow"
                                            class="aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sr-only"
                                            id="shopnow" tabindex="-1" data-radix-collection-item=""></button><input
                                            type="radio" aria-hidden="true" name="payment" tabindex="-1" value="shopnow"
                                            style="
                        transform: translateX(-100%);
                        position: absolute;
                        pointer-events: none;
                        opacity: 0;
                        margin: 0px;
                        width: 16px;
                        height: 16px;
                      " /><label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2 cursor-pointer"
                                            for="shopnow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-shopping-bag h-5 w-5">
                                                <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                                                <path d="M3 6h18"></path>
                                                <path d="M16 10a4 4 0 0 1-8 0"></path>
                                            </svg>Shop Now</label>
                                    </div>
                                </div>
                            </div>
                            <div class="hidden mt-8 border-t pt-6 step-2">
                                <div class="flex justify-between mb-4">
                                    <span class="font-semibold">Total</span><span class="font-semibold">${{ subtotal
                                        }}</span>
                                </div>
                                <button
                                    class="inline-flex items-center justify-center gap-2 place-order whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 px-4 py-2 w-full bg-dsg-red hover:bg-dsg-red/90 text-white"
                                    type="button">
                                    Place Order
                                </button>
                            </div>

                            <div class="container hidden mx-auto px-4 py-8 grow step-3">
                                <div class="max-w-3xl mx-auto">
                                    <div class="bg-white rounded-lg shadow-sm p-6 space-y-6">
                                        <div class="text-center mb-8">
                                            <h1 class="text-2xl font-bold text-dsg-red mb-2">Order Confirmed!</h1>
                                            <p class="text-gray-600">Thank you for your purchase</p>
                                        </div>
                                        <div class="space-y-6 user-data">
                                            <div>
                                                <h2 class="font-semibold mb-4 text-xl">Shipping Information</h2>
                                                <div class="grid grid-cols-2 gap-4 text-gray-600">
                                                    <div>
                                                        <p class="font-medium">Name:</p>
                                                        <p class="checkout-name"></p>
                                                    </div>
                                                    <div>
                                                        <p class="font-medium">Phone:</p>
                                                        <p class="checkout-phone"></p>
                                                    </div>
                                                    <div class="col-span-2">
                                                        <p class="font-medium">Address:</p>
                                                        <p class="checkout-address">Main street</p>
                                                        <p class="checkout-city"></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <h2 class="font-semibold text-xl mb-4">Payment Information</h2>
                                                <div class="text-gray-600">
                                                    <p class="font-medium">Payment Method:</p>
                                                    <p class="capitalize checkout-payment"></p>
                                                </div>
                                            </div>
                                            <div>
                                                <h2 class="font-semibold text-xl mb-4">Order Summary</h2>
                                                <div class="space-y-4">
                                                    <div class="border-t pt-4">
                                                        <div class="flex justify-between">
                                                            <span class="font-semibold">Total</span><span
                                                                class="font-semibold">${{ subtotal }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <p>Please add products to your cart</p>
        <a href="/homepage.html"
            class="continue-payment inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 px-4 py-2 w-full bg-dsg-red hover:bg-dsg-red/90 text-white">Continue
            Shopping</a>
    </div>
</div>

<script type="module">

    // fetch the cart on page load
    // send cart id (from LS)
    // check if cart contain items (on response)
    // show ui
    // else show message (continue shopping)
    import { cartMutations } from './web-resources/js/graphQLMutations/cartMutations.js';

    const updateSubtotalPriceItem = (quantity, price) => {
        return quantity * price;
    }

    const itemTemplate = (item) => `
                    <div class="flex items-center space-x-4"><a class="shrink-0"
                            href="/products/${item.product.sku}" data-discover="true"><img
                                src="${item.product.thumbnail.url}" alt="${item.product.name}"
                                class="w-24 h-24 object-cover rounded-sm"></a>
                        <div class="flex-1"><a href="/products/${item.product.sku}" data-discover="true">
                                <h3 class="font-semibold text-lg mb-1">${item.product.name}</h3>
                            </a>
                            <p class="text-gray-600 mb-2 price"><span>$</span><span class="value">${item.prices.price.value}</span>
                            </p>
                            <div class="flex items-center space-x-4 actions-container">
                                <div class="flex items-center space-x-2 quantity-container">
                                    <button
                                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="lucide lucide-minus h-4 w-4">
                                            <path d="M5 12h14"></path>
                                        </svg>
                                    </button>
                                    <span class="w-8 text-center">${item.quantity}</span>
                                    <button
                                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="lucide lucide-plus h-4 w-4">
                                            <path d="M5 12h14"></path>
                                            <path d="M12 5v14"></path>
                                        </svg>
                                    </button>
                                </div>
                                <button
                                    class="remove-item inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-trash2 h-4 w-4 text-red-500">
                                        <path d="M3 6h18"></path>
                                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                        <line x1="10" x2="10" y1="11" y2="17"></line>
                                        <line x1="14" x2="14" y1="11" y2="17"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-semibold text-lg"><span>$</span><span class="subtotal-item">${updateSubtotalPriceItem(item.quantity, item.prices.price.value)}</span></p>
                        </div>
                    </div>`;


    const updatePrice = (el, price, quantity) => {
        el.closest(".item").querySelector(".subtotal-item").innerHTML = `${updateSubtotalPriceItem(quantity * price).toString()}`;

        const subtotal = document.querySelectorAll(".item:not(.hidden) .subtotal-item");
        let total = 0;
        if (subtotal) {
            subtotal.forEach((el) => {
                const value = el.textContent;
                if (value) {
                    total += parseInt(value);
                }
            });
            document.querySelector('.subtotal').innerHTML = document.querySelector('.total').innerHTML = total.toString();
        }
    }

    const addIncreaseDecreaseQuantityAction = () => {
        const quantityContainer = document.querySelectorAll('.quantity-container');
        if (quantityContainer) {
            quantityContainer.forEach((el) => {
                const price = el.closest(".actions-container").previousElementSibling.querySelector(".value").textContent;

                let quantity = parseInt(
                    el.querySelector('span')?.textContent ?? '1',
                    10,
                );
                const decreaseQuantityButton = el.querySelector(
                    ':scope > button:nth-of-type(1)',
                );
                const increaseQuantityButton = el.querySelector(
                    ':scope > button:nth-of-type(2)',
                );
                decreaseQuantityButton?.addEventListener('click', () => {
                    if (quantity > 1) {
                        quantity -= 1;
                        if (quantity === 1) {
                            decreaseQuantityButton?.setAttribute('disabled', true.toString());
                        }
                        if (price) {
                            updatePrice(el, parseInt(price), quantity);
                        }
                    }
                    el.querySelector('span').innerText = quantity.toString();
                });
                increaseQuantityButton.addEventListener('click', () => {
                    if (quantity === 1) {
                        decreaseQuantityButton.removeAttribute('disabled');
                    }
                    quantity += 1;
                    el.querySelector('span').innerText = quantity.toString();
                    if (price) {
                        updatePrice(el, parseInt(price), quantity);
                    }
                });
            });
        }
    };

    async function updateCartPage() {
        const cart = await cartMutations.getCartByID("M1a2nvO253QEC1kDOYghjTSePf6iXpjv");
        console.log(cart);

        if (cart.items.length == 0) {
            document.querySelector('.shopping-cart-content').classList.add('hidden');
            document.querySelector('.shipping-information-content').classList.add('hidden');
        } else {
            const items = cart.items;
            const itemsContainer = document.querySelector('.cart-items-container');
            items.forEach((item) => {
                const div = document.createElement('div');
                div.classList.add(
                    'p-6',
                    'item',
                );
                div.innerHTML = itemTemplate(item).trim();
                itemsContainer.appendChild(div);
            });
            addIncreaseDecreaseQuantityAction();

            document.querySelector('.subtotal').innerText = cart.prices.grand_total.value;
            document.querySelector('.total').innerText = cart.prices.grand_total.value;
        }
    }

    window.addEventListener('DOMContentLoaded', () => {
        updateCartPage();
    });
</script>